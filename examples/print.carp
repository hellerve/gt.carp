(load "gt.carp")

(def x 0)

(defn f []
  (do
    (set! x (Int.inc x))
    (let [idx x]
      (for [i 0 10]
        (do
          (IO.println &(fmt "%d %d" i idx))
          (GT.yield))))))

(defn main []
  (do
    (GT.init)
    (for [i 0 270] (GT.go f))
    (GT.ret 0)))
